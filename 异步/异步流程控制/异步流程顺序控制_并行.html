<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    
</body>
<script>
    // 并行执行
    // 即所有异步任务同时执行，等到全部完成以后，才执行final函数。
    var itmes = [1, 2, 3, 4, 5, 6];
    var restults = [ ];

    function async(arg, callback) {
        console.log('参数为: ' + arg + ', 1秒后返回结果');
        setTimeout(function () {callback(arg * 2); }, 1000);
    }

    function final(value) {
        console.log('完成: ', value);
    }

    itmes.forEach(function(item) {
        async(item, function(restult) {
            restults.push(restult);
            if(restults.length == item.length) {
                final(restults[restults.length - 1]);
            }
        });
    });
    // 上面的写法只要一秒，就能完成整个脚本。这就是说，并行执行的效率较高，比起串行执行一次只能执行一个任务，较为节约时间。
    // 但是问题在于如果并行的任务较多，很容易耗尽系统资源，拖慢运行速度。因此有了第三种流程控制方式
</script>
</html>